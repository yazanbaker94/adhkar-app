<!DOCTYPE html>
<html lang="ar" dir="rtl" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, height=device-height">
    <!-- Add iOS-specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SakinahTime">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="icon1.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icon1.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icon2.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icon1.png">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" media="screen and (device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="icon2.png">
    <link rel="apple-touch-startup-image" media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="icon2.png">
    
    <link rel="manifest" href="manifest.json">
    <!-- Add favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <!-- Reliable Quran fonts from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400&display=swap" rel="stylesheet">
    <title>SakinahTime - سكينة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Configure Tailwind dark mode
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#1a1a1a',
                            text: '#ffffff',
                            primary: '#3B82F6',
                            secondary: '#4B5563'
                        }
                    }
                }
            }
        }
    </script>

    <!-- External CSS Files -->
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/components.css?v=1.1">
    <link rel="stylesheet" href="styles/responsive.css">










    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&display=swap" rel="stylesheet">
</head>


<body class="bg-gradient-to-b from-gray-100 to-white dark:from-gray-900 dark:to-gray-800 text-gray-900 dark:text-gray-100 min-h-screen flex flex-col transition-colors duration-150 overflow-x-hidden">
    <!-- Remove debug panel -->
    


    <!-- Header Section -->
    <header class="bg-gradient-to-r from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-850 dark:to-gray-800 shadow-lg border-b border-gray-100 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between py-3 sm:py-4">
                <!-- Brand Section -->
                <div class="flex items-center gap-3">
                    <button onclick="goToHomeScreen()" class="group focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg transition-transform duration-150" title="العودة للرئيسية - Go to Home">
                        <img src="icon1.png" alt="SakinahTime" class="h-8 w-8 sm:h-10 sm:w-10 rounded-lg shadow-md group-hover:shadow-lg transition-transform duration-150 group-hover:scale-105 border-2 border-transparent group-hover:border-blue-200 dark:group-hover:border-blue-400">
                    </button>
                    
                    <!-- Date Display -->
                    <div class="flex flex-col text-xs text-gray-500 dark:text-gray-400">
                        <div class="flex items-center gap-1">
                            <i class="fas fa-calendar-alt text-blue-500 text-[10px] sm:text-xs flex-shrink-0"></i>
                            <span id="gregorianDate" class="text-[10px] sm:text-xs">Loading...</span>
                        </div>
                        <div class="text-[8px] sm:text-[10px] text-gray-400 dark:text-gray-500" id="hijriDate"></div>
                    </div>
                </div>

                <!-- Actions Section -->
                <div class="flex items-center space-x-2 rtl:space-x-reverse">
                    <!-- Language Toggle -->
                    <button onclick="switchLanguage()" id="langToggle" 
                        class="group relative p-2 sm:p-2.5 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 bg-white/70 dark:bg-gray-700/70 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-500 transition-transform duration-150 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-sm hover:shadow-md transform hover:scale-105" 
                        title="Switch Language - تبديل اللغة">
                        <i class="fas fa-globe text-sm sm:mr-1.5 rtl:sm:mr-0 rtl:sm:ml-1.5 group-hover:rotate-12 transition-transform duration-150"></i>
                        <span class="hidden sm:inline">English</span>
                        <span class="sm:hidden">EN</span>
                    </button>

                    <!-- Dark Mode Toggle -->
                    <button id="darkModeToggle" 
                        class="group relative p-2 sm:p-2.5 text-gray-600 dark:text-gray-300 hover:text-amber-600 dark:hover:text-amber-400 bg-white/70 dark:bg-gray-700/70 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-amber-300 dark:hover:border-amber-500 transition-transform duration-150 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 shadow-sm hover:shadow-md transform hover:scale-105" 
                        title="Toggle Dark Mode - تبديل الوضع الليلي">
                        <i class="fas fa-moon dark:hidden text-sm group-hover:rotate-12 transition-transform duration-150"></i>
                        <i class="fas fa-sun hidden dark:block text-sm group-hover:rotate-180 transition-transform duration-150"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Reading Progress Bar -->
    <div id="readingProgressContainer" class="reading-progress-container">
        <div id="readingProgressBar" class="reading-progress-bar"></div>
    </div>



    <!-- Ayah Context Menu Popover -->
    <div id="ayahMenuPopover" style="display:none; position:absolute; z-index:10000;" class="bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-2 animate-general-fade-in">
      <div class="flex gap-1 justify-center">
        <button id="ayahMenuPlay" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors" title="Play Ayah"><i class="fas fa-play"></i></button>
        <button id="ayahMenuTranslation" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors" title="Show Translation"><i class="fas fa-language"></i></button>
        <button id="ayahMenuTafsir" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors" title="Show Tafsir"><i class="fas fa-book-open"></i></button>
        <button id="ayahMenuBookmark" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors" title="Bookmark"><i class="far fa-bookmark"></i></button>
        <button id="ayahMenuShare" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors" title="Share Verse"><i class="fas fa-share-alt"></i></button>
      </div>
    </div>
    <!-- Tutorial Modal -->
    <div id="tutorialModal" class="fixed inset-0 bg-black/60 z-50 hidden">
        <div class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90%] max-w-lg bg-white/95 dark:bg-gray-800/95 rounded-2xl p-8 shadow-2xl border border-white/20 dark:border-gray-700/50 text-right">
  
            <div class="text-center mb-6">
                <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg">
                    <i class="fas fa-bell text-2xl text-white"></i>
                </div>
                <h2 class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent" id="tutorialTitle"></h2>
            </div>
  
            <div id="iosTutorial" class="hidden">
                <ol class="list-decimal list-inside space-y-4 text-gray-700 dark:text-gray-300" id="iosSteps"></ol>
                <div class="mt-6 p-4 bg-blue-50/70 dark:bg-blue-900/30 rounded-xl text-sm text-blue-700 dark:text-blue-300 border border-blue-200/50 dark:border-blue-700/50" id="iosNote"></div>
            </div>
  
            <div id="androidTutorial" class="hidden">
                <ol class="list-decimal list-inside space-y-4 text-gray-700 dark:text-gray-300" id="androidSteps"></ol>
            </div>
  
            <div class="mt-8 flex justify-center">
                <button onclick="closeTutorial()" class="bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-8 py-3 rounded-xl font-medium shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200" id="gotItButton"></button>
            </div>
        </div>
    </div>
  
  

    <!-- Tab Navigation -->
    <div class="flex justify-center bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-gray-800 dark:via-gray-750 dark:to-gray-800 border-b-2 border-gray-100 dark:border-gray-700 px-4 py-2 shadow-sm">
        <div class="flex bg-white/60 dark:bg-gray-800/60 backdrop-blur-sm rounded-xl p-1 border border-gray-200/50 dark:border-gray-600/50 shadow-inner">
        <div class="tab" data-tab="qibla" id="qiblaTab" title="القبلة - Qibla Direction">القبلة</div>
        <div class="tab active" data-tab="adhkar" id="adhkarTab" title="الأذكار - Daily Remembrance">الأذكار</div>
        <div class="tab" data-tab="prayer" id="prayerTab" title="أوقات الصلاة - Prayer Times">أوقات الصلاة</div>
            <div class="tab" data-tab="tasbih" id="tasbihTab" title="التسبيح - Digital Tasbih">التسبيح</div>
        <div class="tab" data-tab="quran" id="quranTab" title="القرآن - Holy Quran">القرآن</div>
        </div>
    </div>

    <!-- Quran Controls - Moved outside main for proper sticky behavior -->
    <div class="quran-controls-sticky flex items-center justify-between px-4 py-2 mb-6 gap-2 flex-nowrap min-w-0 z-50">
        <!-- Left Section: Controls -->
        <div class="flex items-center gap-1 flex-shrink-0">
            <!-- Settings Button -->
            <button onclick="toggleQuranSettings()" class="rounded-md p-2 transition-colors text-sm flex-shrink-0" id="settingsBtn" title="Quran Settings - إعدادات القرآن">
                <i class="fas fa-cog w-3 h-3"></i>
            </button>
            
            <!-- Reading Mode Button -->
            <button onclick="toggleReadingMode()" id="btnReadingMode" class="text-green px-3 py-2 rounded-md  transition-colors text-sm flex-shrink-0" title="Toggle Reading Mode - تبديل وضع القراءة" disabled>
                <i class="fas fa-book-open w-3 h-3"></i>
            </button>
        </div>

        <!-- Center Section: Page & Juz Indicator -->
        <div id="pageJuzIndicator" class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 hidden">
            <span id="currentPageIndicator" class="px-2 py-1">صفحة ١</span>
            <span id="currentJuzIndicator" class="px-2 py-1">جزء ١</span>
        </div>

        <!-- Right Section: Surah Selector -->
        <div class="flex items-center flex-shrink-0 min-w-0">
            <button id="surahMenuBtn" class="rounded-md px-3 py-2 flex items-center gap-2 text-sm transition-colors overflow-hidden" title="Select Surah - اختر السورة">
                <span id="selectedSurahText" class="truncate">اختر السورة</span>
                <i class="fas fa-chevron-down text-xs flex-shrink-0"></i>
            </button>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center islamic-pattern overflow-y-auto">
        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="fixed inset-0 flex justify-center items-center bg-white dark:bg-black z-50">
            <div class="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
        </div>

        <!-- Quran Tab Content -->
        <div id="quranContent" class="tab-content w-full max-w-4xl p-4">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                        
                <!-- Quran Search Bar -->
                <div class="quran-search-container mb-4">
                    <div class="relative">
                                        <div class="flex items-center bg-white/90 dark:bg-gray-700/90 backdrop-blur-sm border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg overflow-hidden" dir="auto">
                    <div class="flex-shrink-0 px-4">
                        <i class="fas fa-search text-gray-400 dark:text-gray-500"></i>
                    </div>
                    <input 
                        type="text" 
                        id="quranSearchInput" 
                        class="flex-1 px-3 py-3 bg-transparent border-none outline-none text-gray-800 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400"
                        placeholder=""
                        autocomplete="off"
                        dir="auto"
                    >
                    <div class="flex-shrink-0 px-2">
                        <button 
                            id="quranSearchClearBtn" 
                            class="hidden p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"
                            onclick="clearQuranSearch()"
                            title="Clear Search - مسح البحث"
                        >
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                        
                        <!-- Search Results Dropdown -->
                        <div id="quranSearchResults" class="absolute top-full left-0 right-0 mt-2 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border border-gray-200 dark:border-gray-600 rounded-xl shadow-2xl max-h-96 overflow-y-auto z-[60] hidden">
                            <!-- Results will be populated here -->
                        </div>
                        </div>
                        </div>
                        
                <!-- Quran Settings Side Menu -->
                <div id="quranSettingsMenu" class="fixed inset-y-0 right-0 w-80 bg-white/95 dark:bg-gray-900/95 shadow-2xl border-l border-white/30 dark:border-gray-600/50 transform translate-x-full transition-transform duration-200 ease-in-out z-[60] hidden" style="background-image: radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%);">
                    <div class="flex flex-col h-full">
                        <!-- Header -->
                        <div class="flex items-center justify-between p-4 border-b border-white/20 dark:border-gray-600/30 bg-gradient-to-r from-transparent via-white/10 to-transparent" style="min-height: 60px;">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg">
                                    <i class="fas fa-cog text-white text-lg"></i>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 dark:text-white flex-1 min-w-0 pr-4" id="settingsTitle" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">إعدادات القرآن</h3>
                            </div>
                            <button id="closeSettingsBtn" onclick="toggleQuranSettings()" class="w-10 h-10 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110 shadow-lg flex-shrink-0" style="min-width: 44px; min-height: 44px;">
                                <i class="fas fa-times text-sm"></i>
                        </button>
                        </div>

                        <!-- Settings Content -->
                        <div class="flex-1 p-4 space-y-6 overflow-y-auto">
                            <!-- Font Size Settings -->
                            <div class="bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/30 dark:border-gray-600/50 shadow-md">
                                <h4 class="text-md font-medium mb-3 flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center">
                                        <i class="fas fa-text-height text-white text-sm"></i>
                                    </div>
                                    <span id="fontSizeTitle" class="font-bold text-gray-800 dark:text-gray-200">حجم الخط</span>
                                </h4>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700 dark:text-gray-300" id="currentSizeLabel">حجم الخط الحالي</span>
                                        <span id="currentFontSize" class="text-sm font-mono bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-900/50 text-blue-700 dark:text-blue-300 px-3 py-1.5 rounded-lg border border-blue-200 dark:border-blue-700">2rem</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <button id="decreaseBtn" onclick="decreaseTextSize()" class="bg-gradient-to-r from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30 hover:from-red-200 hover:to-pink-200 dark:hover:from-red-800/40 dark:hover:to-pink-800/40 text-red-600 dark:text-red-400 p-2 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm" title="تصغير الخط">
                                            <i class="fas fa-minus text-sm"></i>
                            </button>
                                        <div class="flex-1 mx-2">
                                            <input type="range" id="fontSizeSlider" min="1" max="4" step="0.1" value="2" class="w-full h-2 bg-gradient-to-r from-blue-200 to-indigo-200 dark:from-blue-800 to-indigo-800 rounded-lg appearance-none cursor-pointer">
                                        </div>
                                        <button id="increaseBtn" onclick="increaseTextSize()" class="bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 hover:from-green-200 hover:to-emerald-200 dark:hover:from-green-800/40 dark:hover:to-emerald-800/40 text-green-600 dark:text-green-400 p-2 rounded-lg transition-all duration-200 hover:scale-105 shadow-sm" title="تكبير الخط">
                                            <i class="fas fa-plus text-sm"></i>
                            </button>
                                    </div>
                                    <button onclick="resetTextSize()" class="w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white py-2 px-4 rounded-lg transition-all duration-200 hover:scale-105 text-sm font-medium shadow-lg" id="resetSizeBtn">
                                        <i class="fas fa-undo mr-2"></i>
                                        <span id="resetSizeText">إعادة تعيين الحجم</span>
                            </button>
                            </div>
                        </div>

                            <!-- Font Family Settings -->
                            <div class="bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/30 dark:border-gray-600/50 shadow-md">
                                <h4 class="text-md font-medium mb-3 flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center">
                                        <i class="fas fa-font text-white text-sm"></i>
                                    </div>
                                    <span id="fontFamilyTitle" class="font-bold text-gray-800 dark:text-gray-200">نوع الخط</span>
                                </h4>
                                <div class="space-y-2">
                                    <label class="flex items-center p-3 bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-600/60 dark:to-gray-700/60 backdrop-blur-sm border border-white/40 dark:border-gray-600/40 rounded-lg hover:from-white/80 hover:to-gray-50/80 dark:hover:from-gray-600/80 dark:hover:to-gray-700/80 cursor-pointer transition-all duration-200 hover:scale-[1.02] shadow-sm">
                                        <input type="radio" name="fontFamily" value="quran-font" class="mr-3 text-green-500 focus:ring-green-500" checked>
                                        <div class="flex-1">
                                            <div class="font-medium text-gray-800 dark:text-gray-200" id="font1Name">خط القرآن الأصلي</div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">Uthmanic Hafs</div>
                    </div>
                                    </label>
                                    <label class="flex items-center p-3 bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-600/60 dark:to-gray-700/60 backdrop-blur-sm border border-white/40 dark:border-gray-600/40 rounded-lg hover:from-white/80 hover:to-gray-50/80 dark:hover:from-gray-600/80 dark:hover:to-gray-700/80 cursor-pointer transition-all duration-200 hover:scale-[1.02] shadow-sm">
                                        <input type="radio" name="fontFamily" value="utman-taha" class="mr-3 text-green-500 focus:ring-green-500">
                                        <div class="flex-1">
                                            <div class="font-medium text-gray-800 dark:text-gray-200" id="font2Name">خط عثمان طه</div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">Utman Taha Naskh</div>
                </div>
                                    </label>
                                    <label class="flex items-center p-3 bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-600/60 dark:to-gray-700/60 backdrop-blur-sm border border-white/40 dark:border-gray-600/40 rounded-lg hover:from-white/80 hover:to-gray-50/80 dark:hover:from-gray-600/80 dark:hover:to-gray-700/80 cursor-pointer transition-all duration-200 hover:scale-[1.02] shadow-sm">
                                        <input type="radio" name="fontFamily" value="al-mushaf" class="mr-3 text-green-500 focus:ring-green-500">
                                        <div class="flex-1">
                                            <div class="font-medium text-gray-800 dark:text-gray-200" id="font3Name">خط القلم</div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">Al Qalam</div>
                                        </div>
                                    </label>
                                    <label class="flex items-center p-3 bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-600/60 dark:to-gray-700/60 backdrop-blur-sm border border-white/40 dark:border-gray-600/40 rounded-lg hover:from-white/80 hover:to-gray-50/80 dark:hover:from-gray-600/80 dark:hover:to-gray-700/80 cursor-pointer transition-all duration-200 hover:scale-[1.02] shadow-sm">
                                        <input type="radio" name="fontFamily" value="system-arabic" class="mr-3 text-green-500 focus:ring-green-500">
                                        <div class="flex-1">
                                            <div class="font-medium text-gray-800 dark:text-gray-200" id="font4Name">خط النظام العربي</div>
                                            <div class="text-sm text-gray-600 dark:text-gray-400" id="font4Desc">Arial</div>
                                        </div>
                                    </label>
                                </div>
                            </div>



                            <!-- Audio Settings -->
                            <div class="bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/30 dark:border-gray-600/50 shadow-md">
                                <h4 class="text-md font-medium mb-3 flex items-center gap-2">
                                    <div class="w-8 h-8 bg-gradient-to-r from-red-500 to-pink-600 rounded-full flex items-center justify-center">
                                        <i class="fas fa-volume-up text-white text-sm"></i>
                                    </div>
                                    <span id="audioTitle" class="font-bold text-gray-800 dark:text-gray-200">إعدادات الصوت</span>
                                </h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300" id="reciterLabel">القارئ</label>
                                        <select id="reciterSelect" class="w-full p-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 shadow-sm" style="background-image: none;">
                                            <option value="ar.alafasy" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">مشاري العفاسي</option>
                                            <option value="ar.husary" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">محمود خليل الحصري</option>
                                            <option value="ar.minshawi" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">محمد صديق المنشاوي</option>
                                            <option value="ar.sudais" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">عبد الرحمن السديس</option>
                                            <option value="ar.shuraim" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">سعود الشريم</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300" id="playbackSpeedLabel">سرعة التشغيل</label>
                                        <select id="playbackSpeedSelect" class="w-full p-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 shadow-sm" style="background-image: none;">
                                            <option value="0.5" id="speed1" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">بطيء (0.5x)</option>
                                            <option value="0.75" id="speed2" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">أبطأ (0.75x)</option>
                                            <option value="1" selected id="speed3" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">عادي (1x)</option>
                                            <option value="1.25" id="speed4" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">أسرع (1.25x)</option>
                                            <option value="1.5" id="speed5" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">سريع (1.5x)</option>
                                        </select>
                                    </div>
                                    <div class="bg-gradient-to-r from-blue-50/60 to-indigo-50/60 dark:from-blue-900/20 dark:to-indigo-900/20 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg p-3">
                                        <label class="flex items-center gap-3 cursor-pointer">
                                            <input type="checkbox" id="continuousPlayToggle" class="w-4 h-4 text-blue-600 bg-white/80 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-blue-600">
                                            <div>
                                                <div class="text-sm font-medium text-gray-800 dark:text-gray-200" id="continuousPlayLabel">تشغيل مستمر حتى نهاية السورة</div>
                                                <div class="text-xs text-gray-600 dark:text-gray-400" id="continuousPlayDesc">عند التشغيل، يستمر حتى آخر آية في السورة</div>
                                            </div>
                                        </label>
                                    </div>

                                    <div class="bg-gradient-to-r from-green-50/60 to-emerald-50/60 dark:from-green-900/20 dark:to-emerald-900/20 backdrop-blur-sm border border-green-200/50 dark:border-green-700/50 rounded-lg p-3">
                                        <label class="flex items-center gap-3 cursor-pointer">
                                            <input type="checkbox" id="singleVerseLoopToggle" class="w-4 h-4 text-green-600 bg-white/80 border-green-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-green-600">
                                            <div>
                                                <div class="text-sm font-medium text-gray-800 dark:text-gray-200" id="singleVerseLoopLabel">تكرار الآية الواحدة للحفظ</div>
                                                <div class="text-xs text-gray-600 dark:text-gray-400" id="singleVerseLoopDesc">يكرر الآية الحالية باستمرار لمساعدة الحفظ</div>
                                            </div>
                                        </label>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="quranContent" class="space-y-3">
                    <div class="text-center text-2xl leading-loose font-quran-original" id="arabicText">
                    </div>
                    
                    <!-- Quick Surahs Section (shown when no surah is selected) -->
                    <div id="quickSurahsSection" class="max-w-2xl mx-auto">
                        <div class="text-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2" id="quickSurahsTitle">السور الأكثر قراءة</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400" id="quickSurahsDesc">Quick access to commonly read surahs</p>
                        </div>
                        
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                            <!-- Al-Fatiha -->
                            <button onclick="loadQuickSurah(1)" class="bg-gradient-to-r from-green-50/80 to-emerald-50/80 dark:from-green-900/40 dark:to-emerald-900/40 hover:from-green-100/80 hover:to-emerald-100/80 dark:hover:from-green-900/60 dark:hover:to-emerald-900/60 text-green-700 dark:text-green-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-green-200/50 dark:border-green-700/50 shadow-sm hover:shadow-md transform hover:scale-[1.02]">
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-6 h-6 bg-green-500/20 rounded-full flex items-center justify-center mb-1">
                                        <span class="text-xs font-bold">١</span>
                                    </div>
                                    <span class="text-xs font-bold">الفاتحة</span>
                                    <span class="text-xs opacity-75">Al-Fatiha</span>
                                </div>
                            </button>
                            
                            <!-- Al-Baqarah -->
                            <button onclick="loadQuickSurah(2)" class="bg-gradient-to-r from-blue-50/80 to-cyan-50/80 dark:from-blue-900/40 dark:to-cyan-900/40 hover:from-blue-100/80 hover:to-cyan-100/80 dark:hover:from-blue-900/60 dark:hover:to-cyan-900/60 text-blue-700 dark:text-blue-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-blue-200/50 dark:border-blue-700/50 shadow-sm hover:shadow-md transform hover:scale-[1.02]">
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-6 h-6 bg-blue-500/20 rounded-full flex items-center justify-center mb-1">
                                        <span class="text-xs font-bold">٢</span>
                                    </div>
                                    <span class="text-xs font-bold">البقرة</span>
                                    <span class="text-xs opacity-75">Al-Baqarah</span>
                                </div>
                            </button>
                            
                            <!-- Yasin -->
                            <button onclick="loadQuickSurah(36)" class="bg-gradient-to-r from-purple-50/80 to-indigo-50/80 dark:from-purple-900/40 dark:to-indigo-900/40 hover:from-purple-100/80 hover:to-indigo-100/80 dark:hover:from-purple-900/60 dark:hover:to-indigo-900/60 text-purple-700 dark:text-purple-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-purple-200/50 dark:border-purple-700/50 shadow-sm hover:shadow-md transform hover:scale-[1.02]">
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-6 h-6 bg-purple-500/20 rounded-full flex items-center justify-center mb-1">
                                        <span class="text-xs font-bold">٣٦</span>
                                    </div>
                                    <span class="text-xs font-bold">يس</span>
                                    <span class="text-xs opacity-75">Ya-Sin</span>
                                </div>
                            </button>
                            
                            <!-- Al-Kahf -->
                            <button onclick="loadQuickSurah(18)" class="bg-gradient-to-r from-orange-50/80 to-red-50/80 dark:from-orange-900/40 dark:to-red-900/40 hover:from-orange-100/80 hover:to-red-100/80 dark:hover:from-orange-900/60 dark:hover:to-red-900/60 text-orange-700 dark:text-orange-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-orange-200/50 dark:border-orange-700/50 shadow-sm hover:shadow-md transform hover:scale-[1.02]">
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-6 h-6 bg-orange-500/20 rounded-full flex items-center justify-center mb-1">
                                        <span class="text-xs font-bold">١٨</span>
                                    </div>
                                    <span class="text-xs font-bold">الكهف</span>
                                    <span class="text-xs opacity-75">Al-Kahf</span>
                                </div>
                            </button>
                            
                            <!-- Al-Mulk -->
                            <button onclick="loadQuickSurah(67)" class="bg-gradient-to-r from-teal-50/80 to-cyan-50/80 dark:from-teal-900/40 dark:to-cyan-900/40 hover:from-teal-100/80 hover:to-cyan-100/80 dark:hover:from-teal-900/60 dark:hover:to-cyan-900/60 text-teal-700 dark:text-teal-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-teal-200/50 dark:border-teal-700/50 shadow-sm hover:shadow-md transform hover:scale-[1.02]">
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-6 h-6 bg-teal-500/20 rounded-full flex items-center justify-center mb-1">
                                        <span class="text-xs font-bold">٦٧</span>
                                    </div>
                                    <span class="text-xs font-bold">الملك</span>
                                    <span class="text-xs opacity-75">Al-Mulk</span>
                                </div>
                            </button>
                            
                            <!-- Al-Ikhlas -->
                            <button onclick="loadQuickSurah(112)" class="bg-gradient-to-r from-pink-50/80 to-rose-50/80 dark:from-pink-900/40 dark:to-rose-900/40 hover:from-pink-100/80 hover:to-rose-100/80 dark:hover:from-pink-900/60 dark:hover:to-rose-900/60 text-pink-700 dark:text-pink-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-pink-200/50 dark:border-pink-700/50 shadow-sm hover:shadow-md transform hover:scale-[1.02]">
                                <div class="flex flex-col items-center gap-1">
                                    <div class="w-6 h-6 bg-pink-500/20 rounded-full flex items-center justify-center mb-1">
                                        <span class="text-xs font-bold">١١٢</span>
                                    </div>
                                    <span class="text-xs font-bold">الإخلاص</span>
                                    <span class="text-xs opacity-75">Al-Ikhlas</span>
                                </div>
                            </button>
                        </div>
                    </div>
                    
                    <div class="text-center text-lg text-gray-600 dark:text-gray-400" id="translationText"></div>
                </div>

            </div>
        </div>

        <!-- Qibla Tab Content -->
        <div id="qiblaContent" class="tab-content w-full p-4">
            <!-- Professional Compass Interface -->
            <div class="max-w-md mx-auto">
                <!-- Location Display -->
                <div class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-2xl p-4 mb-4 shadow-2xl border border-white/20 dark:border-gray-700/50">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg">
                                <i class="fas fa-location-dot text-white text-sm"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-800 dark:text-white" id="locationTitle">الموقع الحالي</h3>
                        </div>
                        <button id="refreshLocationBtn" class="bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 p-2.5 rounded-lg transition-colors duration-200">
                            <i class="fas fa-sync-alt text-sm"></i>
                        </button>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center gap-2 text-gray-600 dark:text-gray-300">
                            <i class="fas fa-map-marker-alt text-blue-500 w-4"></i>
                            <span id="locationInfo">جاري تحديد الموقع...</span>
                        </div>
                        <div class="flex items-center gap-2 text-gray-600 dark:text-gray-300">
                            <i class="fas fa-route text-green-500 w-4"></i>
                            <span id="qiblaDistance">جاري الحساب...</span>
                        </div>
                    </div>
                </div>

                <!-- Professional Compass Container -->
                <div class="bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border border-white/20 dark:border-gray-700/50">
                    <div class="relative w-80 h-80 mx-auto">
                        <!-- Outer Ring with Degree Markings -->
                        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-gray-50 via-white to-gray-100 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 border-4 border-gray-200/50 dark:border-gray-500/50 shadow-inner">
                            <!-- Degree Ring -->
                            <div class="absolute inset-2 rounded-full border border-gray-300/30 dark:border-gray-500/30">
                                <!-- Rotating Compass Rose -->
                                <div class="absolute inset-0 rounded-full transition-transform duration-500 ease-out" id="compassRose" style="transform: rotate(0deg);">
                                    <!-- Cardinal Direction Markers -->
                                    <div class="absolute inset-0 rounded-full">
                                        <!-- North -->
                                        <div class="absolute top-1 left-1/2 transform -translate-x-1/2 flex flex-col items-center">
                                            <div class="w-1 h-6 bg-red-500 rounded-full shadow-lg"></div>
                                            <div class="mt-1 bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-lg">N</div>
                                        </div>
                                        <!-- East -->
                                        <div class="absolute right-1 top-1/2 transform -translate-y-1/2 flex flex-col items-center">
                                            <div class="h-1 w-6 bg-gray-500 rounded-full shadow-lg"></div>
                                            <div class="mt-1 bg-gray-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-lg">E</div>
                                        </div>
                                        <!-- South -->
                                        <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 flex flex-col items-center">
                                            <div class="w-1 h-6 bg-gray-500 rounded-full shadow-lg"></div>
                                            <div class="mt-1 bg-gray-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-lg">S</div>
                                        </div>
                                        <!-- West -->
                                        <div class="absolute left-1 top-1/2 transform -translate-y-1/2 flex flex-col items-center">
                                            <div class="h-1 w-6 bg-gray-500 rounded-full shadow-lg"></div>
                                            <div class="mt-1 bg-gray-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-lg">W</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Degree Markings -->
                                    <div class="absolute inset-4 rounded-full" id="degreeMarkings">
                                        <!-- Generated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Qibla Direction Indicator (Fixed) -->
                        <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                            <div class="absolute -top-8 left-1/2 transform -translate-x-1/2 z-20">
                                <div class="flex flex-col items-center">
                                    <!-- Qibla Icon -->
                                    <div id="qiblaIndicator" class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full flex items-center justify-center shadow-2xl border-2 border-white/50 dark:border-gray-700/50 transition-all duration-300">
                                        <i class="fas fa-kaaba text-white text-lg"></i>
                                    </div>
                                    <!-- Direction Arrow -->
                                    <div class="w-0 h-0 border-l-3 border-r-3 border-t-8 border-transparent border-t-green-500 mt-1 shadow-lg"></div>
                                    <!-- Direction Line -->
                                    <div class="w-0.5 h-8 bg-green-500 shadow-lg"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Device Direction Needle (Rotates) -->
                        <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                            <div id="deviceNeedle" class="absolute transition-transform duration-300 ease-out" style="transform: rotate(0deg);">
                                <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 z-30">
                                    <div class="flex flex-col items-center">
                                        <!-- Device Direction Arrow -->
                                        <div class="w-0 h-0 border-l-2 border-r-2 border-b-6 border-transparent border-b-blue-500 shadow-lg"></div>
                                        <!-- Needle Line -->
                                        <div class="w-0.5 h-6 bg-blue-500 shadow-lg"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Center Hub -->
                        <div class="absolute inset-0 flex items-center justify-center z-40">
                            <div class="w-8 h-8 bg-gradient-to-br from-gray-300 to-gray-500 dark:from-gray-600 dark:to-gray-800 rounded-full shadow-xl border-2 border-white/50 dark:border-gray-700/50"></div>
                        </div>

                        <!-- Start Button Overlay -->
                        <div id="compassStartOverlay" class="absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-full z-50">
                            <button id="startCompassBtn" class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-full shadow-2xl hover:shadow-emerald-500/25 transition-all duration-300 transform hover:scale-105 font-medium">
                                <i class="fas fa-compass mr-2"></i>
                                <span id="startCompassText">ابدأ البوصلة</span>
                            </button>
                        </div>
                    </div>

                                            <!-- Status Display -->
                        <div class="mt-6 space-y-4">
                            <!-- Direction and Accuracy Display -->
                            <div class="grid grid-cols-2 gap-4">
                                <!-- Direction Display -->
                                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-xl p-4 text-center border border-blue-200/50 dark:border-blue-700/50">
                                    <div class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1" id="degreeDisplay">--°</div>
                                    <div class="text-xs text-gray-600 dark:text-gray-400" id="degreeLabel">الدرجة</div>
                                </div>
                                
                                <!-- Status Display -->
                                <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-xl p-4 text-center border border-green-200/50 dark:border-green-700/50">
                                    <div class="text-sm font-medium text-green-600 dark:text-green-400 mb-1" id="alignmentStatus">غير متصل</div>
                                    <div class="text-xs text-gray-600 dark:text-gray-400" id="statusLabel">الحالة</div>
                                </div>
                            </div>

                            <!-- Alignment Progress Bar -->
                            <div class="bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden">
                                <div id="alignmentProgress" class="h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                            </div>

                            <!-- Accuracy Indicator -->
                            <div class="flex items-center justify-center gap-2 text-sm">
                                <div class="flex items-center gap-2">
                                    <div class="w-3 h-3 rounded-full bg-gray-300 dark:bg-gray-600 transition-colors duration-300" id="accuracyIndicator"></div>
                                    <span id="accuracyText" class="text-gray-600 dark:text-gray-400">غير متصل</span>
                                </div>
                            </div>

                            <!-- Help Button -->
                            <div class="text-center">
                                <button onclick="showCompassHelp()" class="text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 text-sm underline transition-colors duration-200">
                                    <i class="fas fa-question-circle mr-1"></i>
                                    <span id="helpText">كيفية استخدام البوصلة؟</span>
                                </button>
                            </div>
                        </div>
                </div>
            </div>

            <!-- Help Modal -->
            <div id="compassHelpModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
                <div class="bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-2xl p-6 max-w-md mx-4 shadow-2xl border border-white/20 dark:border-gray-700/50">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white" id="helpModalTitle">كيفية استخدام البوصلة</h3>
                        <button onclick="closeCompassHelp()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors duration-200">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <div class="space-y-3 text-sm text-gray-600 dark:text-gray-300" id="helpModalContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                    <button onclick="closeCompassHelp()" class="w-full mt-6 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white py-3 rounded-xl font-medium shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105">
                        <span id="closeHelpText">حسناً</span>
                    </button>
                </div>
            </div>
        </div>
        <div id="adhkarContent" class="tab-content active w-full">
            <!-- Main Buttons for Morning/Evening Adhkar -->
            <div id="home" class="w-full flex flex-col items-center justify-center mt-4">
              <!-- Quick Access Cards -->
              <div class="max-w-4xl w-full px-4 mb-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <!-- Morning Adhkar Card -->
                  <div class="bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl border border-amber-200 dark:border-amber-800 p-6 hover:shadow-lg transition-all duration-300 cursor-pointer" onclick="loadAdhkar('sabah')">
                    <div class="flex items-center gap-4">
                      <div class="bg-amber-100 dark:bg-amber-900/40 rounded-lg p-3">
                        <i class="fas fa-sun text-2xl text-amber-600 dark:text-amber-400"></i>
                      </div>
                      <div class="flex-1">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-1" id="morningCardTitle">أذكار الصباح</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-300" id="morningCardDesc">ابدأ يومك بالذكر والدعاء</p>
                      </div>
                      <i class="fas fa-chevron-left text-gray-400 dark:text-gray-500 arrow-icon"></i>
                    </div>
                  </div>

                  <!-- Evening Adhkar Card -->
                  <div class="bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800 p-6 hover:shadow-lg transition-all duration-300 cursor-pointer" onclick="loadAdhkar('masaa')">
                    <div class="flex items-center gap-4">
                      <div class="bg-indigo-100 dark:bg-indigo-900/40 rounded-lg p-3">
                        <i class="fas fa-moon text-2xl text-indigo-600 dark:text-indigo-400"></i>
                      </div>
                      <div class="flex-1">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-1" id="eveningCardTitle">أذكار المساء</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-300" id="eveningCardDesc">اختتم يومك بالذكر والاستغفار</p>
                      </div>
                      <i class="fas fa-chevron-left text-gray-400 dark:text-gray-500 arrow-icon"></i>
                    </div>
                  </div>
                </div>
              </div>

              <!-- More Adhkar Button -->
              <div class="max-w-md mx-auto px-4 mb-8">
                <button id="adhkarMenuBtn" class="w-full bg-gradient-to-r from-purple-50 via-pink-50 to-purple-50 dark:from-purple-900/20 dark:via-pink-900/20 dark:to-purple-900/20 border border-purple-200 dark:border-purple-800 hover:from-purple-100 hover:via-pink-100 hover:to-purple-100 dark:hover:from-purple-900/30 dark:hover:via-pink-900/30 dark:hover:to-purple-900/30 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transform hover:scale-105" title="عرض أقسام الأذكار اليومية">
                  <div class="flex items-center justify-center gap-3">
                    <div class="bg-purple-100 dark:bg-purple-900/40 rounded-lg p-2">
                      <i class="fas fa-th-large text-purple-600 dark:text-purple-400"></i>
                    </div>
                    <div class="flex flex-col items-start">
                      <span class="text-lg font-semibold" id="moreAdhkarTitle">المزيد من الأذكار</span>
                      <span class="text-xs text-gray-500 dark:text-gray-400" id="moreAdhkarDesc">اكتشف جميع أقسام الأذكار</span>
                    </div>
                    <i class="fas fa-chevron-left text-gray-400 dark:text-gray-500 mr-auto arrow-icon"></i>
                  </div>
                </button>
              </div>

              <!-- Popular Adhkar Categories -->
              <div class="max-w-4xl w-full px-4 mb-8">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 text-center" id="popularCategoriesTitle">الأذكار الأكثر استخداماً</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                  <button onclick="closeAdhkarMenuAndLoad('protection')" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-4 px-3 rounded-lg shadow-sm flex flex-col items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Protection">
                    <i class="fas fa-shield-alt text-yellow-500 text-lg"></i>
                    <span class="text-xs text-center" id="protectionLabel">أذكار الحماية</span>
                </button>
                  <button onclick="closeAdhkarMenuAndLoad('istighfar')" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-4 px-3 rounded-lg shadow-sm flex flex-col items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Seeking Forgiveness">
                    <i class="fas fa-leaf text-green-500 text-lg"></i>
                    <span class="text-xs text-center" id="istighfarLabel">الاستغفار</span>
                  </button>
                  <button onclick="closeAdhkarMenuAndLoad('anxiety')" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-4 px-3 rounded-lg shadow-sm flex flex-col items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Anxiety">
                    <i class="fas fa-heart-crack text-blue-500 text-lg"></i>
                    <span class="text-xs text-center" id="anxietyLabel">أذكار القلق</span>
                  </button>
                  <button onclick="closeAdhkarMenuAndLoad('salah')" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-4 px-3 rounded-lg shadow-sm flex flex-col items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Prayer Duʿāʾs">
                    <i class="fas fa-pray text-blue-500 text-lg"></i>
                    <span class="text-xs text-center" id="prayerLabel">أذكار الصلاة</span>
                </button>
                </div>
              </div>

              <!-- Islamic Guides Section -->
              <div class="max-w-4xl w-full px-4 mb-8">
                <div class="bg-gradient-to-r from-amber-50 via-yellow-50 to-amber-50 dark:from-amber-900/20 dark:via-yellow-900/20 dark:to-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800 p-6">
                  <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                      <div class="bg-amber-100 dark:bg-amber-900/40 rounded-lg p-2">
                        <i class="fas fa-book-open text-amber-600 dark:text-amber-400"></i>
                      </div>
                      <h3 class="text-lg font-semibold text-gray-800 dark:text-white" id="islamicGuidesTitle">الأدلة الإسلامية</h3>
                    </div>
                    <button onclick="toggleIslamicGuides()" class="bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/30 dark:hover:bg-amber-900/50 text-amber-700 dark:text-amber-300 hover:text-amber-800 dark:hover:text-amber-200 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 flex items-center gap-2 shadow-sm hover:shadow-md transform hover:scale-105">
                      <i class="fas fa-chevron-down text-xs" id="guidesToggleIcon"></i>
                      <span id="guidesToggleText">عرض الأدلة</span>
                    </button>
                  </div>
                  <p class="text-sm text-gray-600 dark:text-gray-300 mb-4" id="islamicGuidesDesc">
                    تعلم كيفية أداء العبادات والأعمال الإسلامية بالطريقة الصحيحة
                  </p>
                  
                  <div id="islamicGuidesContent" class="hidden">
                    <!-- Filter and Count Section -->
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4">
                      <!-- Category Filter -->
                      <div class="relative">
                        <button id="categoryFilterBtn" onclick="toggleCategoryFilter()" class="bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 px-3 py-2 rounded-lg text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 flex items-center gap-2 min-w-0">
                          <i class="fas fa-filter text-amber-600 dark:text-amber-400 text-xs"></i>
                          <span id="categoryFilterText" class="truncate">جميع الفئات</span>
                          <i class="fas fa-chevron-down text-xs text-gray-400"></i>
                        </button>
                        
                        <!-- Dropdown -->
                        <div id="categoryFilterDropdown" class="hidden absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg z-10 min-w-48 max-h-64 overflow-y-auto">
                          <div id="categoryFilterOptions">
                            <!-- Options will be populated by JavaScript -->
                          </div>
                        </div>
                      </div>
                      
                      <!-- Guides Count -->
                      <div class="text-sm text-gray-500 dark:text-gray-400">
                        <span id="guidesCountDisplay">16 دليل متاح</span>
                      </div>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2" id="islamicGuidesList">
                      <!-- Islamic guides will be loaded here -->
                    </div>
                    
                    <!-- Show More Button -->
                    <div id="showMoreGuidesContainer" class="hidden mt-4 text-center">
                      <button id="showMoreGuidesBtn" onclick="toggleShowAllGuides()" class="bg-gradient-to-r from-amber-100 to-yellow-100 hover:from-amber-200 hover:to-yellow-200 dark:from-amber-900/30 dark:to-yellow-900/30 dark:hover:from-amber-900/50 dark:hover:to-yellow-900/50 text-amber-700 dark:text-amber-300 hover:text-amber-800 dark:hover:text-amber-200 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 flex items-center gap-2 mx-auto shadow-sm hover:shadow-md transform hover:scale-105">
                        <span id="showMoreGuidesText">عرض المزيد</span>
                        <i id="showMoreGuidesIcon" class="fas fa-chevron-down text-xs"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Daily Reminders -->
              <div class="max-w-4xl w-full px-4 mb-6">
                <div class="bg-gradient-to-r from-green-50 via-emerald-50 to-green-50 dark:from-green-900/20 dark:via-emerald-900/20 dark:to-green-900/20 rounded-xl border border-green-200 dark:border-green-800 p-6">
                  <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-3">
                      <div class="bg-green-100 dark:bg-green-900/40 rounded-lg p-2">
                        <i class="fas fa-lightbulb text-green-600 dark:text-green-400"></i>
                      </div>
                      <h3 class="text-lg font-semibold text-gray-800 dark:text-white" id="reminderTitle">تذكير يومي</h3>
                    </div>
                    <button onclick="generateRandomHadith()" class="bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 text-green-700 dark:text-green-300 hover:text-green-800 dark:hover:text-green-200 px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex items-center gap-2 shadow-sm hover:shadow-md transform hover:scale-105">
                      <i class="fas fa-shuffle text-xs"></i>
                      <span id="randomHadithBtn">حديث آخر</span>
                    </button>
                  </div>
                  <p class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed" id="reminderText">
                    قال رسول الله ﷺ: "من قال سبحان الله وبحمده، في يوم مائة مرة، حُطت خطاياه وإن كانت مثل زبد البحر"
                  </p>
                  <div class="mt-3 text-xs text-gray-500 dark:text-gray-400" id="reminderSource">رواه البخاري ومسلم</div>
                </div>
              </div>
              <!-- Modal for Adhkar Sections -->
              <div id="adhkarMenuModal" class="fixed inset-0 bg-black/60 flex items-start sm:items-center justify-center z-50 hidden pt-4 sm:pt-0">
                <div class="bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-850 dark:to-gray-800 rounded-3xl shadow-2xl p-8 max-w-2xl w-full relative animate-general-fade-in border border-gray-200/50 dark:border-gray-600/50 my-4 sm:my-0" style="max-height:90vh; overflow-y:auto;">
                  <button id="closeAdhkarMenu" class="absolute top-4 left-4 w-10 h-10 bg-red-50 dark:bg-red-900/30 hover:bg-red-100 dark:hover:bg-red-900/50 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 rounded-full flex items-center justify-center transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2" title="إغلاق القائمة">
                    <i class="fas fa-times text-sm"></i>
                  </button>
                  <!-- Daily Routine -->
                  <div class="pt-4">
                    <div class="text-center mb-8">
                      <div class="bg-blue-100 dark:bg-blue-900/30 rounded-2xl p-4 inline-block mb-4">
                        <i class="fas fa-calendar-day text-3xl text-blue-600 dark:text-blue-400"></i>
                      </div>
                      <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-2" id="dailyAdhkarTitle">الأذكار اليومية</h3>
                      <p class="text-gray-600 dark:text-gray-300 text-sm" id="dailyAdhkarDesc">اختر من مجموعة متنوعة من الأذكار والأدعية</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 justify-center">
                      <button onclick="closeAdhkarMenuAndLoad('waking_sleeping')" id="btnWakingSleeping" class="group bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 hover:from-blue-100 hover:to-blue-200 dark:hover:from-blue-900/30 dark:hover:to-blue-800/30 border border-blue-200 dark:border-blue-700 text-gray-700 dark:text-gray-300 hover:text-blue-800 dark:hover:text-blue-200 py-4 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" title="Waking up & Sleeping Duas">
                        <div class="flex flex-col items-center gap-2">
                          <div class="bg-blue-100 dark:bg-blue-900/40 rounded-lg p-2 group-hover:bg-blue-200 dark:group-hover:bg-blue-800/50 transition-colors duration-300">
                            <i class="fas fa-bed text-blue-600 dark:text-blue-400 text-lg"></i>
                          </div>
                          <span id="labelWakingSleeping" class="text-xs font-medium text-center"></span>
                        </div>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('home')" id="btnHome" class="group bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 hover:from-purple-100 hover:to-purple-200 dark:hover:from-purple-900/30 dark:hover:to-purple-800/30 border border-purple-200 dark:border-purple-700 text-gray-700 dark:text-gray-300 hover:text-purple-800 dark:hover:text-purple-200 py-4 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2" title="Entering & Leaving Home Duas">
                        <div class="flex flex-col items-center gap-2">
                          <div class="bg-purple-100 dark:bg-purple-900/40 rounded-lg p-2 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/50 transition-colors duration-300">
                            <i class="fas fa-home text-purple-600 dark:text-purple-400 text-lg"></i>
                          </div>
                          <span id="labelHome" class="text-xs font-medium text-center"></span>
                        </div>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('bathroom')" id="btnBathroom" class="group bg-gradient-to-r from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 hover:from-pink-100 hover:to-pink-200 dark:hover:from-pink-900/30 dark:hover:to-pink-800/30 border border-pink-200 dark:border-pink-700 text-gray-700 dark:text-gray-300 hover:text-pink-800 dark:hover:text-pink-200 py-4 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2" title="Entering & Exiting the Bathroom Duas">
                        <div class="flex flex-col items-center gap-2">
                          <div class="bg-pink-100 dark:bg-pink-900/40 rounded-lg p-2 group-hover:bg-pink-200 dark:group-hover:bg-pink-800/50 transition-colors duration-300">
                            <i class="fas fa-toilet text-pink-600 dark:text-pink-400 text-lg"></i>
                          </div>
                          <span id="labelBathroom" class="text-xs font-medium text-center"></span>
                        </div>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('eating')" id="btnEating" class="group bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 hover:from-green-100 hover:to-green-200 dark:hover:from-green-900/30 dark:hover:to-green-800/30 border border-green-200 dark:border-green-700 text-gray-700 dark:text-gray-300 hover:text-green-800 dark:hover:text-green-200 py-4 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2" title="Before & After Eating Duas">
                        <div class="flex flex-col items-center gap-2">
                          <div class="bg-green-100 dark:bg-green-900/40 rounded-lg p-2 group-hover:bg-green-200 dark:group-hover:bg-green-800/50 transition-colors duration-300">
                            <i class="fas fa-utensils text-green-600 dark:text-green-400 text-lg"></i>
                          </div>
                          <span id="labelEating" class="text-xs font-medium text-center"></span>
                        </div>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('masjid')" id="btnMasjid" class="group bg-gradient-to-r from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 hover:from-indigo-100 hover:to-indigo-200 dark:hover:from-indigo-900/30 dark:hover:to-indigo-800/30 border border-indigo-200 dark:border-indigo-700 text-gray-700 dark:text-gray-300 hover:text-indigo-800 dark:hover:text-indigo-200 py-4 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" title="Entering & Exiting the Masjid Duas">
                        <div class="flex flex-col items-center gap-2">
                          <div class="bg-indigo-100 dark:bg-indigo-900/40 rounded-lg p-2 group-hover:bg-indigo-200 dark:group-hover:bg-indigo-800/50 transition-colors duration-300">
                            <i class="fas fa-mosque text-indigo-600 dark:text-indigo-400 text-lg"></i>
                          </div>
                          <span id="labelMasjid" class="text-xs font-medium text-center"></span>
                        </div>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('traveling')" id="btnTraveling" class="group bg-gradient-to-r from-teal-50 to-teal-100 dark:from-teal-900/20 dark:to-teal-800/20 hover:from-teal-100 hover:to-teal-200 dark:hover:from-teal-900/30 dark:hover:to-teal-800/30 border border-teal-200 dark:border-teal-700 text-gray-700 dark:text-gray-300 hover:text-teal-800 dark:hover:text-teal-200 py-4 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2" title="Traveling Duas">
                        <div class="flex flex-col items-center gap-2">
                          <div class="bg-teal-100 dark:bg-teal-900/40 rounded-lg p-2 group-hover:bg-teal-200 dark:group-hover:bg-teal-800/50 transition-colors duration-300">
                            <i class="fas fa-car text-teal-600 dark:text-teal-400 text-lg"></i>
                          </div>
                          <span id="labelTraveling" class="text-xs font-medium text-center"></span>
                        </div>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('clothes')" id="btnClothes" class="group bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-900/20 dark:to-gray-800/20 hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-900/30 dark:hover:to-gray-800/30 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-200 py-4 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2" title="Wearing Clothes Duas">
                        <div class="flex flex-col items-center gap-2">
                          <div class="bg-gray-100 dark:bg-gray-900/40 rounded-lg p-2 group-hover:bg-gray-200 dark:group-hover:bg-gray-800/50 transition-colors duration-300">
                            <i class="fas fa-tshirt text-gray-600 dark:text-gray-400 text-lg"></i>
                          </div>
                          <span id="labelClothes" class="text-xs font-medium text-center"></span>
                        </div>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('anxiety')" id="btnAnxiety" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Anxiety, Depression & Sadness">
                        <i class="fas fa-heart-crack text-blue-500"></i> <span id="labelAnxiety"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('hardship')" id="btnHardship" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs in Times of Hardship">
                        <i class="fas fa-mountain text-indigo-500"></i> <span id="labelHardship"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('istighfar')" id="btnIstighfar" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Seeking Forgiveness (Istighfar)">
                        <i class="fas fa-leaf text-green-500"></i> <span id="labelIstighfar"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('patience_gratitude')" id="btnPatienceGratitude" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Patience & Gratitude">
                        <i class="fas fa-hands-praying text-yellow-500"></i> <span id="labelPatienceGratitude"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('rabbana')" id="btnRabbana" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Rabbana Duʿāʾs (from the Qur'an)">
                        <i class="fas fa-book-quran text-purple-500"></i> <span id="labelRabbana"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('prophetic')" id="btnProphetic" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Prophetic Duʿāʾs from Hadith">
                        <i class="fas fa-feather-alt text-pink-500"></i> <span id="labelProphetic"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('prophets')" id="btnProphets" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs of the Prophets">
                        <i class="fas fa-user-friends text-indigo-500"></i> <span id="labelProphets"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('rain')" id="btnRain" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Rain / Drought">
                        <i class="fas fa-cloud-rain text-blue-500"></i> <span id="labelRain"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('patient')" id="btnSick" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for the Sick">
                        <i class="fas fa-notes-medical text-red-500"></i> <span id="labelPatient"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('deceased')" id="btnDeceased" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for the Deceased">
                        <i class="fas fa-dove text-gray-500"></i> <span id="labelDeceased"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('marriage_children_rizq')" id="btnMarriageChildrenRizq" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Marriage, Children, Rizq">
                        <i class="fas fa-baby text-green-500"></i> <span id="labelMarriageChildrenRizq"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('protection')" id="btnProtection" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Protection (Evil Eye, Jinn, Calamity)">
                        <i class="fas fa-shield-alt text-yellow-500"></i> <span id="labelProtection"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('salah')" id="btnSalah" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾ before and after Salah">
                        <i class="fas fa-pray text-blue-500"></i> <span id="labelSalah"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('sujood_tashahhud')" id="btnSujoodTashahhud" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs during Sujood & Tashahhud">
                        <i class="fas fa-hands text-orange-500"></i> <span id="labelSujoodTashahhud"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('qunoot')" id="btnQunoot" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿās for Qunoot (Witr prayer)">
                        <i class="fas fa-moon-stars text-teal-500"></i> <span id="labelQunoot"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('tahajjud')" id="btnTahajjud" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Tahajjud">
                        <i class="fas fa-star-and-crescent text-purple-500"></i> <span id="labelTahajjud"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('istikhara')" id="btnIstikhara" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Duʿāʾs for Istikhārah (Seeking Guidance)">
                        <i class="fas fa-compass text-pink-500"></i> <span id="labelIstikhara"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('ramadan')" id="btnRamadan" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Ramadan Duʿāʾs">
                        <i class="fas fa-calendar-alt text-green-500"></i> <span id="labelRamadan"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('hajj')" id="btnHajj" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Dhul Hijjah & Hajj-related Duʿāʾs">
                        <i class="fas fa-kaaba text-yellow-500"></i> <span id="labelHajj"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('laylat_al_qadr')" id="btnLaylatAlQadr" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Laylat al-Qadr Duʿāʾs">
                        <i class="fas fa-lightbulb text-blue-500"></i> <span id="labelLaylatAlQadr"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('eid')" id="btnEid" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Eid Duʿāʾs">
                        <i class="fas fa-gift text-pink-500"></i> <span id="labelEid"></span>
                      </button>
                      <button onclick="closeAdhkarMenuAndLoad('natural_events')" id="btnNaturalEvents" class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white py-2 px-4 rounded-lg shadow-sm flex items-center justify-center gap-2 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500" title="Rain, Eclipse, Earthquake, etc.">
                        <i class="fas fa-bolt text-yellow-500"></i> <span id="labelNaturalEvents"></span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Islamic Guide Detail Modal -->
            <div id="guideDetailModal" class="fixed inset-0 bg-black/60 flex items-start sm:items-center justify-center z-50 hidden pt-4 sm:pt-0">
                <div class="bg-gradient-to-br from-white via-gray-50 to-white dark:from-gray-800 dark:via-gray-850 dark:to-gray-800 rounded-3xl shadow-2xl p-8 max-w-3xl w-full relative animate-general-fade-in border border-gray-200/50 dark:border-gray-600/50 my-4 sm:my-0" style="max-height:90vh; overflow-y:auto;">
                    <button id="closeGuideDetail" class="absolute top-4 left-4 w-10 h-10 bg-red-50 dark:bg-red-900/30 hover:bg-red-100 dark:hover:bg-red-900/50 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 rounded-full flex items-center justify-center transition-all duration-300 shadow-sm hover:shadow-md transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2" title="إغلاق">
                        <i class="fas fa-times text-sm"></i>
                    </button>
                    
                    <div class="pt-4">
                        <div class="text-center mb-8">
                            <div class="bg-amber-100 dark:bg-amber-900/30 rounded-2xl p-4 inline-block mb-4">
                                <i id="guideIcon" class="fas fa-book-open text-3xl text-amber-600 dark:text-amber-400"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-2" id="guideTitle">دليل إسلامي</h3>
                            <p class="text-gray-600 dark:text-gray-300 text-sm" id="guideDescription">وصف الدليل</p>
                        </div>
                        
                        <div class="space-y-4" id="guideSteps">
                            <!-- Steps will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

           <!-- Adhkar View Section -->
<div id="adhkarView" class="hidden max-w-xl mt-6 p-6 bg-white/90 dark:bg-gray-800/90 rounded-3xl shadow-2xl border border-white/20 dark:border-gray-700/50 space-y-6 text-center no-select mx-auto islamic-pattern">
  <!-- Header with Back Button and Counter -->
  <div class="flex justify-between items-center mb-4">
      <button onclick="goHome()" class="flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg p-2 hover:bg-gray-100 dark:hover:bg-gray-700" title="Back - العودة">
          <i class="fas fa-arrow-left text-lg back-arrow"></i>
          <span class="text-sm font-medium" id="backText">العودة</span>
      </button>
      
      <!-- Enhanced Counter Display -->
      <div class="flex items-center gap-4">
          <!-- Auto Swipe Toggle - Moved here for better flow -->
          <div class="flex items-center gap-2 bg-gray-100/70 dark:bg-gray-700/70 px-3 py-1 rounded-full">
              <span class="text-xs text-gray-600 dark:text-gray-300" id="autoSwipeLabel">تلقائي</span>
              <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" id="autoSwipeToggle" onchange="toggleAutoSwipe()" class="sr-only peer">
                  <div class="w-9 h-5 bg-gray-300 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-green-500"></div>
              </label>
          </div>

          <!-- Enhanced Progress Ring with Counter -->
          <div class="relative flex items-center">
              <!-- Progress Ring Container -->
              <div class="relative w-14 h-14">
                  <svg class="w-14 h-14 transform -rotate-90" viewBox="0 0 100 100">
                      <!-- Background circle -->
                      <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="6" fill="none" class="text-gray-200 dark:text-gray-700"/>
                      <!-- Progress circle -->
                      <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="6" fill="none" 
                              class="text-blue-500 dark:text-blue-400 progress-ring" 
                              id="dhikrProgressRing"
                              stroke-dasharray="251.2" 
                              stroke-dashoffset="251.2"
                              stroke-linecap="round"/>
                  </svg>
                  <!-- Counter Number -->
                  <div class="absolute inset-0 flex items-center justify-center">
                      <span class="text-lg font-bold text-blue-600 dark:text-blue-300 dhikr-counter" id="dhikrCountNumber">0</span>
                  </div>
              </div>
              <!-- Counter Title -->
              <div class="text-right mr-2">
                  <h2 class="text-xs font-semibold text-gray-700 dark:text-gray-300" id="dhikrCounter">الذكر</h2>
              </div>
          </div>
      </div>
  </div>

  <!-- Dhikr Content Card -->
  <div class="bg-gradient-to-br from-blue-50/50 to-purple-50/50 dark:from-blue-900/20 dark:to-purple-900/20 backdrop-blur-sm rounded-2xl p-6 border border-blue-200/30 dark:border-blue-700/30 mb-4">
      <!-- Compact Hints inside content -->
      <div class="flex flex-wrap gap-2 justify-center mb-4">
          <div id="swipeHint" class="flex items-center bg-blue-100/60 dark:bg-blue-800/40 text-blue-600 dark:text-blue-400 px-2 py-1 rounded-full text-xs">
              <i class="fas fa-arrows-alt-h mr-1 text-xs"></i> <span id="swipeHintText">اسحب للتنقل</span>
          </div>
          <div id="clickHint" class="flex items-center bg-green-100/60 dark:bg-green-800/40 text-green-600 dark:text-green-400 px-2 py-1 rounded-full text-xs">
              <i class="fas fa-hand-pointer mr-1 cursor-pointer text-xs"></i> <span id="clickHintText">اضغط للعد</span>
          </div>
      </div>
      
      <p class="text-2xl leading-loose text-gray-800 dark:text-gray-200 mb-3 font-quran-original arabic-text" id="adhkarArabicText" dir="rtl"></p>
      <span id="repeatCount" class="inline-block px-3 py-1 bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium mb-3">
          <span id="repeatLabel">تكرار</span>: <span id="repeatValue"></span>
      </span>

      <!-- Toggle Buttons -->
      <div class="flex justify-center gap-2 mb-3">
          <button onclick="toggleTransliteration()" id="transliterationBtn"
              class="w-40 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/40 dark:to-emerald-900/40 hover:from-green-200 hover:to-emerald-200 dark:hover:from-green-900/60 dark:hover:to-emerald-900/60 text-green-700 dark:text-green-300 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 border border-green-200/50 dark:border-green-700/50 shadow-sm hover:shadow-md transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-500/50">
              <i class="fas fa-volume-up mr-1"></i> <span>Pronunciation</span>
          </button>

          <button onclick="toggleTranslation()" id="translationBtn"
              class="w-40 bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/40 dark:to-indigo-900/40 hover:from-blue-200 hover:to-indigo-200 dark:hover:from-blue-900/60 dark:hover:to-indigo-900/60 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 border border-blue-200/50 dark:border-blue-700/50 shadow-sm hover:shadow-md transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50">
              <i class="fas fa-language mr-1"></i> <span>Translation</span>
          </button>
      </div>
      
      <!-- Transliteration (Hidden by default) -->
      <div id="transliterationSection" class="hidden">
          <p class="italic text-gray-600 dark:text-gray-400 mb-2 ltr-text" id="transliterationText" dir="ltr"></p>
      </div>
      
      <!-- Translation (Hidden by default) -->
      <div id="translationSection" class="hidden">
          <p class="text-sm text-gray-700 dark:text-gray-300 ltr-text" id="translationTextDikr" dir="ltr"></p>
      </div>
  </div>

  <!-- Navigation Buttons -->
  <div class="flex justify-between mt-6 gap-4">
      <button onclick="prevDhikr()" id="btnPrev" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium" title="Previous - السابق">السابق</button>
      <button onclick="nextDhikr()" id="btnNext" class="flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-purple-300 font-medium" title="Next - التالي">التالي</button>            
  </div>

        </div>
    </div>
</div>
        <!-- Tasbih Tab Content -->
        <div id="tasbihContent" class="tab-content w-full max-w-lg p-3">
            <div class="bg-white/90 dark:bg-gray-800/90 rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/50 p-4 text-center islamic-pattern">
                <!-- Compact Header Section -->
                <div class="text-center mb-3">
                    <div class="w-10 h-10 mx-auto mb-2 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg">
                        <i class="fas fa-hand-holding-heart text-sm text-white"></i>
                    </div>
                    <div class="flex items-center justify-center gap-2 mb-1">
                        <i class="fas fa-prayer-beads text-purple-600 dark:text-purple-400 text-lg"></i>
                        <h2 class="text-lg font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent" id="tasbihTitle">التسبيح الرقمي</h2>
                    </div>
                    <p class="text-gray-600 dark:text-gray-400 text-xs">Digital Tasbih Counter</p>
                </div>
                
                <!-- Compact Counter and Dhikr Row -->
                <div class="flex gap-3 mb-4">
                    <!-- Counter Display Card -->
                    <div class="flex-1 bg-gradient-to-br from-white/80 to-gray-50/80 dark:from-gray-700/80 dark:to-gray-800/80 rounded-xl p-3 border border-purple-200/50 dark:border-purple-700/50 shadow-lg">
                        <div class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent mb-1" id="tasbihCount">0</div>
                        <div class="text-xs font-medium text-gray-600 dark:text-gray-400" id="tasbihTarget">Target: 33</div>
                    </div>
                    
                    <!-- Current Dhikr Card -->
                    <div class="flex-1 bg-gradient-to-r from-indigo-50/80 to-purple-50/80 dark:from-indigo-900/40 dark:to-purple-900/40 rounded-xl p-3 border border-indigo-200/50 dark:border-indigo-700/50">
                        <p class="text-base font-bold text-gray-800 dark:text-gray-200 mb-1" id="currentDhikr">سبحان الله</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400" id="currentDhikrTranslation">Glory be to Allah</p>
                    </div>
                </div>
                
                <!-- Count Button -->
                <button onclick="incrementTasbih()" class="w-24 h-24 bg-gradient-to-br from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white rounded-full text-xl font-bold shadow-2xl hover:shadow-purple-500/25 transform hover:scale-105 active:scale-95 transition-transform duration-100 focus:outline-none focus:ring-4 focus:ring-purple-300/50 mb-4 select-none touch-manipulation relative overflow-hidden" style="touch-action: manipulation;">
                    <div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-full"></div>
                    <i class="fas fa-plus relative z-10"></i>
                </button>
                
                <!-- Compact Controls -->
                <div class="flex justify-center gap-2 mb-4">
                    <button onclick="resetTasbih()" class="bg-gradient-to-r from-gray-100/80 to-gray-200/80 dark:from-gray-700/80 dark:to-gray-600/80 backdrop-blur-sm hover:from-gray-200/80 hover:to-gray-300/80 dark:hover:from-gray-600/80 dark:hover:to-gray-500/80 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg transition-all duration-200 border border-gray-300/50 dark:border-gray-600/50 shadow-lg hover:shadow-xl text-sm">
                        <i class="fas fa-undo mr-1"></i> <span id="resetBtn">إعادة تعيين</span>
                    </button>
                    <button onclick="changeTasbihTarget()" class="bg-gradient-to-r from-blue-100/80 to-indigo-100/80 dark:from-blue-900/40 dark:to-indigo-900/40 backdrop-blur-sm hover:from-blue-200/80 hover:to-indigo-200/80 dark:hover:from-blue-900/60 dark:hover:to-indigo-900/60 text-blue-700 dark:text-blue-300 px-4 py-2 rounded-lg transition-all duration-200 border border-blue-300/50 dark:border-blue-700/50 shadow-lg hover:shadow-xl text-sm">
                        <i class="fas fa-target mr-1"></i> <span id="targetBtn">تغيير الهدف</span>
                    </button>
                </div>
                
                <!-- Compact Preset Dhikr Options -->
                <div class="grid grid-cols-1 gap-2">
                    <button onclick="setDhikr('سبحان الله', 'Glory be to Allah', 33)" class="bg-gradient-to-r from-blue-50/80 to-cyan-50/80 dark:from-blue-900/40 dark:to-cyan-900/40 backdrop-blur-sm hover:from-blue-100/80 hover:to-cyan-100/80 dark:hover:from-blue-900/60 dark:hover:to-cyan-900/60 text-blue-700 dark:text-blue-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-blue-200/50 dark:border-blue-700/50 shadow-md hover:shadow-lg transform hover:scale-[1.02]">
                        <div class="flex items-center justify-between">
                            <span class="text-sm">سبحان الله</span>
                            <span class="bg-blue-500/20 px-2 py-1 rounded-full text-xs">33</span>
                        </div>
                    </button>
                    <button onclick="setDhikr('الحمد لله', 'Praise be to Allah', 33)" class="bg-gradient-to-r from-green-50/80 to-emerald-50/80 dark:from-green-900/40 dark:to-emerald-900/40 backdrop-blur-sm hover:from-green-100/80 hover:to-emerald-100/80 dark:hover:from-green-900/60 dark:hover:to-emerald-900/60 text-green-700 dark:text-green-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-green-200/50 dark:border-green-700/50 shadow-md hover:shadow-lg transform hover:scale-[1.02]">
                        <div class="flex items-center justify-between">
                            <span class="text-sm">الحمد لله</span>
                            <span class="bg-green-500/20 px-2 py-1 rounded-full text-xs">33</span>
                        </div>
                    </button>
                    <button onclick="setDhikr('الله أكبر', 'Allah is Greatest', 34)" class="bg-gradient-to-r from-red-50/80 to-pink-50/80 dark:from-red-900/40 dark:to-pink-900/40 backdrop-blur-sm hover:from-red-100/80 hover:to-pink-100/80 dark:hover:from-red-900/60 dark:hover:to-pink-900/60 text-red-700 dark:text-red-300 p-3 rounded-lg text-sm font-medium transition-all duration-200 border border-red-200/50 dark:border-red-700/50 shadow-md hover:shadow-lg transform hover:scale-[1.02]">
                        <div class="flex items-center justify-between">
                            <span class="text-sm">الله أكبر</span>
                            <span class="bg-red-500/20 px-2 py-1 rounded-full text-xs">34</span>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Prayer Times Tab Content -->
        <div id="prayerContent" class="tab-content w-full max-w-lg p-3">
            <div class="bg-white/90 dark:bg-gray-800/90 rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/50 p-4 islamic-pattern">
                <!-- Compact Header Section with Settings Button -->
                <div class="relative mb-4">
                    <!-- Settings Button - Top Right Corner -->
                    <div class="absolute top-0 right-0 z-10">
                        <button onclick="togglePrayerSettings()" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 p-2 rounded-lg transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-700" title="Prayer Settings - إعدادات الصلاة">
                            <i class="fas fa-cog text-sm"></i>
                        </button>
                    </div>
                    
                    <!-- Main Header Content -->
                    <div class="text-center">
                        <div class="w-12 h-12 mx-auto mb-2 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg">
                            <i class="fas fa-mosque text-lg text-white"></i>
                        </div>
                        <h2 class="text-xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-1" id="prayerTitle">أوقات الصلاة</h2>
                        <div class="flex items-center justify-center gap-2">
                            <p id="azan-location" class="text-gray-600 dark:text-gray-400 text-xs">جاري تحديد الموقع...</p>
                            <button id="requestLocationBtn" class="hidden bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-2 py-1 rounded-md text-xs transition-all duration-200 shadow-sm hover:shadow-md">
                                <i class="fas fa-location-arrow text-xs mr-1"></i>
                                <span id="requestLocationText">تحديد الموقع</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Cards - REMOVED: Now handled in side settings menu -->

                <!-- Countdown to Next Prayer -->
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 backdrop-blur-sm p-4 rounded-lg border border-blue-200/50 dark:border-blue-700/50 shadow-sm mb-4">
                    <div class="text-center">
                        <div class="text-sm text-gray-600 dark:text-gray-400 mb-1" id="nextPrayerLabel">الوقت المتبقي للصلاة القادمة</div>
                        <div class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-1" id="countdownDisplay">--:--:--</div>
                        <div class="text-sm text-gray-700 dark:text-gray-300" id="nextPrayerName">--</div>
                    </div>
                </div>

                <!-- Compact Prayer Times List -->
                <div class="space-y-2">
                    <div class="bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-700/60 dark:to-gray-800/60 backdrop-blur-sm p-3 rounded-lg border border-gray-200/50 dark:border-gray-600/50 shadow-sm hover:shadow-md dark:hover:shadow-white/5 transition-all duration-200 relative" id="azan-fajr">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center">
                                    <i class="fas fa-moon text-white text-xs"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">الفجر</span>
                                    <span class="text-xs text-blue-500 dark:text-blue-400 coming-prayer-indicator" id="coming-prayer-fajr" style="display: none;">قادمة</span>
                                </div>
                            </div>
                            <span class="font-bold text-base text-gray-800 dark:text-gray-200">--:--</span>
                        </div>
                    </div>
                    
                    
                    <div class="bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-700/60 dark:to-gray-800/60 backdrop-blur-sm p-3 rounded-lg border border-gray-200/50 dark:border-gray-600/50 shadow-sm hover:shadow-md dark:hover:shadow-white/5 transition-all duration-200 relative" id="azan-sunrise">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-sun text-white text-xs"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">الشروق</span>
                                    <span class="text-xs text-blue-500 dark:text-blue-400 coming-prayer-indicator" id="coming-prayer-sunrise" style="display: none;">قادمة</span>
                                </div>
                            </div>
                            <span class="font-bold text-base text-gray-800 dark:text-gray-200">--:--</span>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-700/60 dark:to-gray-800/60 backdrop-blur-sm p-3 rounded-lg border border-gray-200/50 dark:border-gray-600/50 shadow-sm hover:shadow-md dark:hover:shadow-white/5 transition-all duration-200 relative" id="azan-duha">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-sun text-white text-xs"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">الضحى</span>
                                    <span class="text-xs text-blue-500 dark:text-blue-400 coming-prayer-indicator" id="coming-prayer-duha" style="display: none;">قادمة</span>
                                </div>
                            </div>
                            <span class="font-bold text-base text-gray-800 dark:text-gray-200">--:--</span>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-700/60 dark:to-gray-800/60 backdrop-blur-sm p-3 rounded-lg border border-gray-200/50 dark:border-gray-600/50 shadow-sm hover:shadow-md dark:hover:shadow-white/5 transition-all duration-200 relative" id="azan-dhuhr">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-sun text-white text-xs"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">الظهر</span>
                                    <span class="text-xs text-blue-500 dark:text-blue-400 coming-prayer-indicator" id="coming-prayer-dhuhr" style="display: none;">قادمة</span>
                                </div>
                            </div>
                            <span class="font-bold text-base text-gray-800 dark:text-gray-200">--:--</span>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-700/60 dark:to-gray-800/60 backdrop-blur-sm p-3 rounded-lg border border-gray-200/50 dark:border-gray-600/50 shadow-sm hover:shadow-md dark:hover:shadow-white/5 transition-all duration-200 relative" id="azan-asr">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-cloud-sun text-white text-xs"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">العصر</span>
                                    <span class="text-xs text-blue-500 dark:text-blue-400 coming-prayer-indicator" id="coming-prayer-asr" style="display: none;">قادمة</span>
                                </div>
                            </div>
                            <span class="font-bold text-base text-gray-800 dark:text-gray-200">--:--</span>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-700/60 dark:to-gray-800/60 backdrop-blur-sm p-3 rounded-lg border border-gray-200/50 dark:border-gray-600/50 shadow-sm hover:shadow-md dark:hover:shadow-white/5 transition-all duration-200 relative" id="azan-maghrib">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-red-500 to-pink-600 rounded-full flex items-center justify-center">
                                    <i class="fas fa-moon text-white text-xs"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">المغرب</span>
                                    <span class="text-xs text-blue-500 dark:text-blue-400 coming-prayer-indicator" id="coming-prayer-maghrib" style="display: none;">قادمة</span>
                                </div>
                            </div>
                            <span class="font-bold text-base text-gray-800 dark:text-gray-200">--:--</span>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-700/60 dark:to-gray-800/60 backdrop-blur-sm p-3 rounded-lg border border-gray-200/50 dark:border-gray-600/50 shadow-sm hover:shadow-md dark:hover:shadow-white/5 transition-all duration-200 relative" id="azan-isha">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center">
                                    <i class="fas fa-star text-white text-xs"></i>
                                </div>
                                <div class="flex flex-col">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">العشاء</span>
                                    <span class="text-xs text-blue-500 dark:text-blue-400 coming-prayer-indicator" id="coming-prayer-isha" style="display: none;">قادمة</span>
                                </div>
                            </div>
                            <span class="font-bold text-base text-gray-800 dark:text-gray-200">--:--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Prayer Settings Side Menu -->
        <div id="prayerSettingsMenu" class="fixed inset-y-0 right-0 w-80 bg-white/95 dark:bg-gray-900/95 shadow-2xl border-l border-white/30 dark:border-gray-600/50 transform translate-x-full transition-transform duration-200 ease-in-out z-50 hidden" style="background-image: radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%);">
            <div class="flex flex-col h-full">
                <!-- Header -->
                <div class="flex items-center justify-between p-4 border-b border-white/20 dark:border-gray-600/30 bg-gradient-to-r from-transparent via-white/10 to-transparent" style="min-height: 60px;">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg">
                            <i class="fas fa-cog text-white text-lg"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-800 dark:text-white flex-1 min-w-0 pr-4" id="prayerSettingsTitle" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">إعدادات الصلاة</h3>
                    </div>
                    <button id="closePrayerSettingsBtn" onclick="togglePrayerSettings()" class="w-10 h-10 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110 shadow-lg flex-shrink-0" style="min-width: 44px; min-height: 44px;">
                        <i class="fas fa-times text-sm"></i>
                    </button>
                </div>

                <!-- Settings Content -->
                <div class="flex-1 p-4 space-y-6 overflow-y-auto">
                    <!-- Notification Settings -->
                    <div class="bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/30 dark:border-gray-600/50 shadow-md">
                        <h4 class="text-md font-medium mb-3 flex items-center gap-2">
                            <div class="w-8 h-8 bg-gradient-to-r from-red-500 to-pink-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-bell text-white text-sm"></i>
                            </div>
                            <span id="notificationSettingsTitle" class="font-bold text-gray-800 dark:text-gray-200">إشعارات أوقات الصلاة</span>
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-gradient-to-r from-blue-50/60 to-indigo-50/60 dark:from-blue-900/20 dark:to-indigo-900/20 backdrop-blur-sm border border-blue-200/50 dark:border-blue-700/50 rounded-lg p-3">
                                <label class="flex items-center gap-3 cursor-pointer">
                                    <input type="checkbox" id="prayerNotificationToggle" class="w-4 h-4 text-blue-600 bg-white/80 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-blue-600">
                                    <div>
                                        <div class="text-sm font-medium text-gray-800 dark:text-gray-200" id="prayerNotificationLabel">تفعيل إشعارات أوقات الصلاة</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400" id="prayerNotificationDesc">استقبل إشعارات قبل وقت الصلاة</div>
                                    </div>
                                </label>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300" id="azanSoundLabel">صوت الأذان</label>
                                <select id="azanSoundSelect" class="w-full p-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 shadow-sm" style="background-image: none;">
                                    <option value="adhan.mp3" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">الأذان الأساسي - Default Adhan</option>
                                    <option value="adhan_makkah.mp3" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">أذان مكة المكرمة - Makkah Adhan</option>
                                    <option value="adhan_madinah.mp3" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">أذان المدينة المنورة - Madinah Adhan</option>
                                    <option value="adhan_egypt.mp3" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">أذان مصر - Egypt Adhan</option>
                                    <option value="adhan_morocco.mp3" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">أذان المغرب - Morocco Adhan</option>
                                    <option value="adhan_turkey.mp3" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">أذان تركيا - Turkey Adhan</option>
                                </select>
                                
                                <!-- Custom Adhan Upload Section -->
                                <div class="mt-3 p-3 bg-gradient-to-r from-green-50/60 to-emerald-50/60 dark:from-green-900/20 dark:to-emerald-900/20 backdrop-blur-sm border border-green-200/50 dark:border-green-700/50 rounded-lg">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fas fa-upload text-green-600 dark:text-green-400 text-sm"></i>
                                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300" id="customAdhanLabel">رفع أذان مخصص</span>
                                    </div>
                                    <div class="space-y-2">
                                        <input type="file" id="customAdhanInput" accept=".mp3,.wav,.m4a" class="hidden">
                                        <button onclick="document.getElementById('customAdhanInput').click()" class="w-full px-3 py-2 bg-green-100 hover:bg-green-200 dark:bg-green-800/60 dark:hover:bg-green-700/60 text-green-700 dark:text-green-300 rounded-lg transition-colors duration-200 text-sm">
                                            <i class="fas fa-plus mr-2"></i>
                                            <span id="uploadAdhanBtn">اختر ملف صوتي</span>
                                        </button>
                                        <div id="customAdhanInfo" class="text-xs text-gray-600 dark:text-gray-400 hidden">
                                            <div id="customAdhanName" class="font-medium"></div>
                                            <div id="customAdhanSize" class="text-gray-500"></div>
                                        </div>
                                        <div id="customAdhanActions" class="flex gap-2 hidden">
                                            <button onclick="testCustomAdhan()" class="flex-1 px-2 py-1 bg-blue-100 hover:bg-blue-200 dark:bg-blue-800/60 dark:hover:bg-blue-700/60 text-blue-700 dark:text-blue-300 rounded text-xs transition-colors">
                                                <i class="fas fa-play mr-1"></i>
                                                <span id="testAdhanBtn">اختبار</span>
                                            </button>
                                            <button onclick="removeCustomAdhan()" class="px-2 py-1 bg-red-100 hover:bg-red-200 dark:bg-red-800/60 dark:hover:bg-red-700/60 text-red-700 dark:text-red-300 rounded text-xs transition-colors">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300" id="notificationTimeLabel">أوقات الإشعارات</label>
                                <div class="space-y-2">
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" id="notificationAtTime" class="w-4 h-4 text-blue-600 bg-white/80 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-blue-600">
                                        <span class="text-sm text-gray-800 dark:text-gray-200" id="notificationAtTimeLabel">في وقت الصلاة</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" id="notification5min" class="w-4 h-4 text-blue-600 bg-white/80 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-blue-600">
                                        <span class="text-sm text-gray-800 dark:text-gray-200" id="notification5minLabel">5 دقائق قبل</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" id="notification10min" class="w-4 h-4 text-blue-600 bg-white/80 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-blue-600">
                                        <span class="text-sm text-gray-800 dark:text-gray-200" id="notification10minLabel">10 دقائق قبل</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" id="notification15min" class="w-4 h-4 text-blue-600 bg-white/80 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-blue-600">
                                        <span class="text-sm text-gray-800 dark:text-gray-200" id="notification15minLabel">15 دقيقة قبل</span>
                                    </label>
                                    <label class="flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" id="notification30min" class="w-4 h-4 text-blue-600 bg-white/80 border-blue-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-blue-600">
                                        <span class="text-sm text-gray-800 dark:text-gray-200" id="notification30minLabel">30 دقيقة قبل</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Test Notification Buttons -->
                            <div class="bg-gradient-to-r from-yellow-50/60 to-orange-50/60 dark:from-yellow-900/20 dark:to-orange-900/20 backdrop-blur-sm border border-yellow-200/50 dark:border-yellow-700/50 rounded-lg p-3">
                                <div class="flex items-center gap-2 mb-3">
                                    <i class="fas fa-vial text-yellow-600 dark:text-yellow-400 text-sm"></i>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">اختبار الإشعارات - Test Notifications</span>
                                </div>
                                <div class="grid grid-cols-2 gap-2">
                                    <button onclick="testNotification()" class="px-3 py-2 bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-800/60 dark:hover:bg-yellow-700/60 text-yellow-700 dark:text-yellow-300 rounded-lg transition-colors duration-200 text-sm">
                                        <i class="fas fa-bell mr-1"></i>
                                        اختبار عام - General Test
                                    </button>
                                    <button onclick="showBasicNotification('Dhuhr')" class="px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-800/60 dark:hover:bg-blue-700/60 text-blue-700 dark:text-blue-300 rounded-lg transition-colors duration-200 text-sm">
                                        <i class="fas fa-pray mr-1"></i>
                                        اختبار الظهر - Dhuhr Test
                                    </button>
                                    <button onclick="showBasicNotification('Fajr')" class="px-3 py-2 bg-green-100 hover:bg-green-200 dark:bg-green-800/60 dark:hover:bg-green-700/60 text-green-700 dark:text-green-300 rounded-lg transition-colors duration-200 text-sm">
                                        <i class="fas fa-sun mr-1"></i>
                                        اختبار الفجر - Fajr Test
                                    </button>
                                    <button onclick="showBasicNotification('Maghrib')" class="px-3 py-2 bg-purple-100 hover:bg-purple-200 dark:bg-purple-800/60 dark:hover:bg-purple-700/60 text-purple-700 dark:text-purple-300 rounded-lg transition-colors duration-200 text-sm">
                                        <i class="fas fa-moon mr-1"></i>
                                        اختبار المغرب - Maghrib Test
                                    </button>
                                </div>
                                <div class="mt-2">
                                    <button onclick="testDelayedNotification()" class="w-full px-3 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-800/60 dark:hover:bg-red-700/60 text-red-700 dark:text-red-300 rounded-lg transition-colors duration-200 text-sm font-medium">
                                        <i class="fas fa-clock mr-1"></i>
                                        اختبار بعد دقيقة (عند إغلاق التطبيق) - Test in 1 min (when app closed)
                                    </button>
                                </div>
                                <div class="mt-2">
                                    <button onclick="testAndroidBackgroundSync()" class="w-full px-3 py-2 bg-green-100 hover:bg-green-200 dark:bg-green-800/60 dark:hover:bg-green-700/60 text-green-700 dark:text-green-300 rounded-lg transition-colors duration-200 text-sm font-medium">
                                        <i class="fas fa-sync mr-1"></i>
                                        اختبار Android في الخلفية - Android Background Test
                                    </button>
                                </div>
                                <div class="mt-2">
                                    <button onclick="testSimpleAndroidNotification()" class="w-full px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-800/60 dark:hover:bg-blue-700/60 text-blue-700 dark:text-blue-300 rounded-lg transition-colors duration-200 text-sm font-medium">
                                        <i class="fas fa-bell mr-1"></i>
                                        اختبار Android بسيط (10 ثانية) - Simple Android Test (10s)
                                    </button>
                                </div>
                                <div class="mt-2">
                                    <button onclick="testEmulatorNotification()" class="w-full px-3 py-2 bg-purple-100 hover:bg-purple-200 dark:bg-purple-800/60 dark:hover:bg-purple-700/60 text-purple-700 dark:text-purple-300 rounded-lg transition-colors duration-200 text-sm font-medium">
                                        <i class="fas fa-mobile-alt mr-1"></i>
                                        اختبار المحاكي الفوري - Emulator Test (Instant)
                                    </button>
                                </div>
                                <div class="mt-2 text-xs text-gray-600 dark:text-gray-400">
                                    اضغط على أي زر لاختبار الإشعارات - Click any button to test notifications
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Prayer Calculation Method Settings -->
                    <div class="bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/30 dark:border-gray-600/50 shadow-md">
                        <h4 class="text-md font-medium mb-3 flex items-center gap-2">
                            <div class="w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-calculator text-white text-sm"></i>
                            </div>
                            <span id="calculationMethodTitle" class="font-bold text-gray-800 dark:text-gray-200">طريقة حساب أوقات الصلاة</span>
                        </h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300" id="asrCalculationLabel">حساب العصر</label>
                                <select id="asrCalculationSelect" class="w-full p-3 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all duration-200 shadow-sm" style="background-image: none;">
                                    <option value="shafi" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">شافعي - Shafi'i</option>
                                    <option value="hanafi" class="text-gray-800 dark:text-gray-200 bg-white dark:bg-gray-800">حنفي - Hanafi</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Manual Prayer Time Offsets -->
                    <div class="bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/30 dark:border-gray-600/50 shadow-md">
                        <h4 class="text-md font-medium mb-3 flex items-center gap-2">
                            <div class="w-8 h-8 bg-gradient-to-r from-orange-500 to-red-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-sliders-h text-white text-sm"></i>
                            </div>
                            <span id="prayerOffsetsTitle" class="font-bold text-gray-800 dark:text-gray-200">تعديل أوقات الصلاة</span>
                        </h4>
                        <div class="space-y-3">
                            <div class="text-xs text-gray-600 dark:text-gray-400 mb-3" id="prayerOffsetsDesc">إضافة أو طرح دقائق من أوقات الصلاة المحسوبة</div>
                            
                            <!-- Fajr Offset -->
                            <div class="flex items-center justify-between">
                                <label class="text-sm text-gray-700 dark:text-gray-300" id="fajrOffsetLabel">الفجر</label>
                                <div class="flex items-center gap-2">
                                    <button onclick="adjustPrayerOffset('fajr', -1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">-</button>
                                    <span id="fajrOffset" class="w-12 text-center text-sm font-medium text-gray-800 dark:text-gray-200">+0</span>
                                    <button onclick="adjustPrayerOffset('fajr', 1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">+</button>
                                </div>
                            </div>
                            
                            <!-- Dhuhr Offset -->
                            <div class="flex items-center justify-between">
                                <label class="text-sm text-gray-700 dark:text-gray-300" id="dhuhrOffsetLabel">الظهر</label>
                                <div class="flex items-center gap-2">
                                    <button onclick="adjustPrayerOffset('dhuhr', -1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">-</button>
                                    <span id="dhuhrOffset" class="w-12 text-center text-sm font-medium text-gray-800 dark:text-gray-200">+0</span>
                                    <button onclick="adjustPrayerOffset('dhuhr', 1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">+</button>
                                </div>
                            </div>
                            
                            <!-- Asr Offset -->
                            <div class="flex items-center justify-between">
                                <label class="text-sm text-gray-700 dark:text-gray-300" id="asrOffsetLabel">العصر</label>
                                <div class="flex items-center gap-2">
                                    <button onclick="adjustPrayerOffset('asr', -1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">-</button>
                                    <span id="asrOffset" class="w-12 text-center text-sm font-medium text-gray-800 dark:text-gray-200">+0</span>
                                    <button onclick="adjustPrayerOffset('asr', 1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">+</button>
                                </div>
                            </div>
                            
                            <!-- Maghrib Offset -->
                            <div class="flex items-center justify-between">
                                <label class="text-sm text-gray-700 dark:text-gray-300" id="maghribOffsetLabel">المغرب</label>
                                <div class="flex items-center gap-2">
                                    <button onclick="adjustPrayerOffset('maghrib', -1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">-</button>
                                    <span id="maghribOffset" class="w-12 text-center text-sm font-medium text-gray-800 dark:text-gray-200">+0</span>
                                    <button onclick="adjustPrayerOffset('maghrib', 1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">+</button>
                                </div>
                            </div>
                            
                            <!-- Isha Offset -->
                            <div class="flex items-center justify-between">
                                <label class="text-sm text-gray-700 dark:text-gray-300" id="ishaOffsetLabel">العشاء</label>
                                <div class="flex items-center gap-2">
                                    <button onclick="adjustPrayerOffset('isha', -1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">-</button>
                                    <span id="ishaOffset" class="w-12 text-center text-sm font-medium text-gray-800 dark:text-gray-200">+0</span>
                                    <button onclick="adjustPrayerOffset('isha', 1)" class="w-8 h-8 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors">+</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Time Format Settings -->
                    <div class="bg-white/70 dark:bg-gray-700/70 backdrop-blur-sm rounded-xl p-4 border border-white/30 dark:border-gray-600/50 shadow-md">
                        <h4 class="text-md font-medium mb-3 flex items-center gap-2">
                            <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-clock text-white text-sm"></i>
                            </div>
                            <span id="timeFormatSettingsTitle" class="font-bold text-gray-800 dark:text-gray-200">تنسيق الوقت</span>
                        </h4>
                        <div class="space-y-3">
                            <div class="bg-gradient-to-r from-purple-50/60 to-pink-50/60 dark:from-purple-900/20 dark:to-pink-900/20 backdrop-blur-sm border border-purple-200/50 dark:border-purple-700/50 rounded-lg p-3">
                                <label class="flex items-center gap-3 cursor-pointer">
                                    <input type="checkbox" id="timeFormatToggle" class="w-4 h-4 text-purple-600 bg-white/80 border-purple-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-purple-600">
                                    <div>
                                        <div class="text-sm font-medium text-gray-800 dark:text-gray-200" id="timeFormatLabel">تنسيق 24 ساعة</div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400" id="timeFormatDesc">عرض الوقت بتنسيق 24 ساعة بدلاً من 12 ساعة</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
<!-- Footer Section -->
<footer class="p-4 text-center space-x-2 border-t border-gray-200 dark:border-gray-700 mt-auto">
  <p class="text-sm text-gray-500 dark:text-gray-400">
      Made by 
      <a href="https://github.com/yazanbaker94" 
         target="_blank" 
         rel="noopener noreferrer" 
         class="font-semibold text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
         Yazan Baker
      </a>
  </p>
</footer>


    

<!-- Tafsir Popup Modal -->
<div id="tafsirModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:20000;" class="flex items-center justify-center p-4">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
    <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">
      <div class="flex items-center gap-3">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white" id="tafsirModalTitle">التفسير</h3>
        <select id="tafsirSelect" class="bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2 text-sm" title="Select Tafsir - اختر التفسير">
          <optgroup label="Arabic Tafsir - التفسير العربي">
            <option value="1">التفسير الميسر</option>
            <option value="2">تفسير الجلالين</option>
            <option value="3">تفسير السعدي</option>
            <option value="4">تفسير البغوي</option>
            <option value="5">تفسير القرطبي</option>
            <option value="6">تفسير ابن كثير</option>
            <option value="7">تفسير الطبري</option>
          </optgroup>
          <optgroup label="English Tafsir">
            <option value="en-jalalayn">Tafsir al-Jalalayn (English)</option>
            <option value="en-kathir">Tafsir Ibn Kathir (English)</option>
            <option value="en-maarif">Ma'ariful Quran (English)</option>
            <option value="en-tazkirul">Tazkirul Quran (English)</option>
          </optgroup>
        </select>
      </div>
      <button id="closeTafsirModal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl">&times;</button>
    </div>
    <div class="p-4">
      <div class="mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <div class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2" id="tafsirModalAyah">الآية</div>
        <div class="text-lg text-gray-600 dark:text-gray-400" id="tafsirModalTranslation">Translation</div>
      </div>
      <div class="text-base text-gray-700 dark:text-gray-300 leading-relaxed" id="tafsirModalContent">جاري التحميل...</div>
    </div>
  </div>
</div>

<!-- Translation Popup Modal -->
<div id="translationModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:20000;" class="flex items-center justify-center p-4">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
    <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">
      <div class="flex items-center gap-3">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white" id="translationModalTitle">الترجمة</h3>
        <select id="translationSelect" class="bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2 text-sm" title="Select Translation - اختر الترجمة">
          <optgroup label="English">
            <option value="en.sahih">English (Sahih Intl)</option>
            <option value="en.pickthall">English (Pickthall)</option>
            <option value="en.yusufali">English (Yusuf Ali)</option>
            <option value="en.hilali">English (Hilali-Khan)</option>
            <option value="en.arberry">English (Arberry)</option>
            <option value="en.asad">English (Muhammad Asad)</option>
            <option value="en.daryabadi">English (Daryabadi)</option>
            <option value="en.shakir">English (Shakir)</option>
          </optgroup>
          <optgroup label="European">
            <option value="fr.hamidullah">Français (Hamidullah)</option>
            <option value="fr.leclerc">Français (Leclerc)</option>
            <option value="de.bubenheim">Deutsch (Bubenheim)</option>
            <option value="de.khoury">Deutsch (Khoury)</option>
            <option value="es.cortes">Español (Cortés)</option>
            <option value="es.garcia">Español (García)</option>
            <option value="it.piccardo">Italiano (Piccardo)</option>
            <option value="pt.elhayek">Português (El Hayek)</option>
            <option value="ru.kuliev">Русский (Кулиев)</option>
            <option value="ru.osmanov">Русский (Османов)</option>
            <option value="nl.keyzer">Nederlands (Keyzer)</option>
            <option value="bs.korkut">Bosanski (Korkut)</option>
            <option value="cs.hrbek">Čeština (Hrbek)</option>
            <option value="no.berg">Norsk (Berg)</option>
            <option value="sv.bernstrom">Svenska (Bernström)</option>
            <option value="sq.ahmeti">Shqip (Ahmeti)</option>
          </optgroup>
          <optgroup label="Middle East & Central Asia">
            <option value="tr.diyanet">Türkçe (Diyanet)</option>
            <option value="tr.bulac">Türkçe (Bulaç)</option>
            <option value="ur.junagarhi">اردو (جونا گاری)</option>
            <option value="ur.kanzuliman">اردو (کنز الایمان)</option>
            <option value="fa.ansarian">فارسی (انصاریان)</option>
            <option value="fa.makarem">فارسی (مکارم شیرازی)</option>
            <option value="az.mammadaliyev">Azərbaycan (Məmmədəliyev)</option>
            <option value="ku.asan">کوردی (ئاسان)</option>
          </optgroup>
          <optgroup label="South & Southeast Asia">
            <option value="id.indonesian">Bahasa Indonesia (Kementerian Agama)</option>
            <option value="ms.basmeih">Bahasa Melayu (Basmeih)</option>
            <option value="bn.bengali">বাংলা (মুহিউদ্দীন খান)</option>
            <option value="hi.hindi">हिन्दी (फारूक खान)</option>
            <option value="ta.tamil">தமிழ் (ஜான் டிரஸ்ட்)</option>
            <option value="th.thai">ไทย (สำนักงานพระราชวัง)</option>
          </optgroup>
          <optgroup label="East Asia">
            <option value="zh.jian">中文简体 (马坚译)</option>
            <option value="ja.japanese">日本語 (森亮一)</option>
            <option value="ko.korean">한국어 (최하메드)</option>
          </optgroup>
          <optgroup label="African">
            <option value="ha.gumi">Hausa (Abubakar Gumi)</option>
            <option value="sw.barwani">Kiswahili (Barwani)</option>
            <option value="so.abduh">Soomaali (Abduh)</option>
            <option value="am.sadiq">አማርኛ (ሳዲቅ)</option>
            <option value="yo.mikail">Yorùbá (Mikail)</option>
          </optgroup>
        </select>
      </div>
      <button id="closeTranslationModal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl">&times;</button>
    </div>
    <div class="p-4">
      <div class="mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
        <div class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2" id="translationModalAyah">الآية</div>
      </div>
      <div class="text-base text-gray-700 dark:text-gray-300 leading-relaxed" id="translationModalContent">Translation</div>
    </div>
  </div>
</div>

<!-- Surah Selection Side Menu -->
    <div id="surahSideMenu" class="fixed inset-y-0 left-0 w-80 bg-white/95 dark:bg-gray-900/95 shadow-2xl transform -translate-x-full transition-transform duration-200 ease-in-out z-[60] overflow-hidden border-r border-white/20 dark:border-gray-700/50 islamic-pattern">
  <div class="flex flex-col h-full">
    <!-- Header -->
    <div class="flex items-center justify-between p-6 border-b border-white/20 dark:border-gray-700/50 bg-gradient-to-r from-white/80 to-gray-50/80 dark:from-gray-800/80 dark:to-gray-900/80 backdrop-blur-sm">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center shadow-lg">
          <i class="fas fa-book-open text-white text-sm"></i>
        </div>
        <h3 class="text-xl font-bold text-gray-800 dark:text-white" id="surahMenuTitle">اختر السورة</h3>
      </div>
      <button id="closeSurahMenu" class="w-10 h-10 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white rounded-full flex items-center justify-center transition-all duration-300 shadow-md hover:shadow-lg transform hover:scale-105 backdrop-blur-sm">
        <i class="fas fa-times text-sm"></i>
      </button>
    </div>
    
    <!-- Search Box -->
    <div class="p-6 border-b border-white/20 dark:border-gray-700/50 bg-gradient-to-r from-white/60 to-gray-50/60 dark:from-gray-800/60 dark:to-gray-900/60 backdrop-blur-sm">
      <div class="relative">
        <input 
          type="text" 
          id="surahSearchInput" 
          placeholder=""
          class="w-full px-4 py-3 pl-12 pr-16 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-white/30 dark:border-gray-600/50 rounded-xl focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500/50 dark:focus:ring-emerald-400/50 dark:focus:border-emerald-400/50 text-base text-gray-800 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400 shadow-lg transition-all duration-200"
          style="font-size: 16px;"
        >
        <div class="absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center">
          <i class="fas fa-search text-white text-xs"></i>
        </div>
        <button 
          id="voiceSearchBtn" 
          class="absolute right-4 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500/50"
          title="البحث الصوتي - Voice Search"
          onclick="startVoiceSearch()"
        >
          <i class="fas fa-microphone text-white text-xs"></i>
        </button>
      </div>
      <!-- Voice Search Status -->
      <div id="voiceSearchStatus" class="mt-2 text-sm text-center text-gray-600 dark:text-gray-400 hidden">
        <i class="fas fa-circle text-red-500 animate-pulse mr-1"></i>
        <span id="voiceSearchStatusText">جاري الاستماع... Listening...</span>
      </div>
    </div>
    
    <!-- Surah List -->
    <div class="flex-1 overflow-y-auto bg-gradient-to-b from-white/50 to-gray-50/50 dark:from-gray-800/50 dark:to-gray-900/50 backdrop-blur-sm">
      <div id="surahList" class="p-4 space-y-2">
        <!-- Surah items will be populated here -->
      </div>
    </div>
  </div>
</div>

<!-- Overlay for side menu -->
<div id="surahMenuOverlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[55] hidden transition-all duration-300"></div>

<!-- Service Worker Registration -->
<script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('./sw.js')
                .then(function(registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                })
                .catch(function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
        });
    }

    // iOS PWA specific fixes
    if (window.navigator.standalone) {
        // App is running in standalone mode (added to home screen)
        document.documentElement.classList.add('standalone');
        
        // Prevent zoom on input focus (iOS Safari issue)
        document.addEventListener('focusin', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                e.target.style.fontSize = '16px';
            }
        });
        
        // Prevent zoom on input blur
        document.addEventListener('focusout', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                e.target.style.fontSize = '';
            }
        });
    }

    // Fix for iOS Safari 100vh issue
    function setVH() {
        // Get the actual viewport height
        let vh = window.innerHeight * 0.01;
        
        // For iOS Safari in standalone mode, use a more reliable calculation
        if (window.navigator.standalone) {
            // Use visual viewport if available (more accurate for iOS)
            if (window.visualViewport) {
                vh = window.visualViewport.height * 0.01;
            }
        }
        
        document.documentElement.style.setProperty('--vh', `${vh}px`);
    }
    

    
    window.addEventListener('load', function() {
        setVH();
    });
    window.addEventListener('resize', setVH);
    window.addEventListener('orientationchange', setVH);
    
    // Listen for visual viewport changes (iOS Safari)
    if (window.visualViewport) {
        window.visualViewport.addEventListener('resize', setVH);
    }
    

</script>

<script src="js/main.js"></script>
</body>
</html>


